<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rally Typer</title>
    <link rel="stylesheet" href="assets/css/styles.css?v=1.7" type="text/css" />

    <!-- Firebase SDK -->
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"
    ></script>
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js"
    ></script>
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"
    ></script>
  </head>

  <body>
    <div class="loading">
      <h3>Loading...</h3>
      <div class="loading-bar-container">
        <div class="loading-bar"></div>
      </div>
    </div>

    <canvas id="gameCanvas"> </canvas>

    <div class="text-div">
      <div class="text-content">-Press any key to start-</div>
      <div class="text-cover"></div>
    </div>

    <div class="ending-screen">
      <h2>1st - GOLD</h2>

      <p class="stats">Time:</p>
      <p class="stats">Accuracy:</p>
      <p class="stats">GWAM:</p>
      <p class="stats">Personal Best GWAM:</p>
      <button onclick=" goBackToMenu() ">Back to menu</button>
      <button onclick=" resetGame() ">Play Again</button>
      <div class="clear"></div>

      <form class="leaderboard-form">
        <label for="country">Country: </label>
        <input type="text" name="country" placeholder="country" required />
        <label for="username">Username: </label>
        <input type="text" name="username" placeholder="username" required />
        <button type="submit">Submit to leaderboard</button>
      </form>
    </div>

    <div class="countdown">3</div>
    <button onclick=" goBackToMenu() " id="back-to-menu">Back to menu</button>

    <script type="module" src="assets/js/firebase.js?v=2.0"></script>
    <script type="module" src="assets/js/leaderboard.js?v=2.0"></script>
    <script src="assets/js/stats.min.js?v=2.0"></script>
    <script src="assets/js/three.min.js?v=2.0"></script>
    <script src="assets/js/GLTFLoader.js?v=2.0"></script>

    <script src="assets/js/Data_Variables.js?v=2.1"></script>
    <script src="assets/js/Game_UI.js?v=2.1"></script>
    <script src="assets/js/Main.js?v=2.0"></script>

    <!-- Auto-start game with difficulty from URL -->
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        // Get difficulty from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const difficultyParam = urlParams.get("difficulty");

        if (difficultyParam !== null) {
          // Convert to number and start game automatically
          const difficultyLevel = parseInt(difficultyParam, 10);
          if (difficultyLevel >= 0 && difficultyLevel <= 4) {
            // Hide main menu and start game
            chooseDifficultyLevel(difficultyLevel);
          }
        }
      });
    </script>
  </body>
</html>
